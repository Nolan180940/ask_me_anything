<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ ‘æ´ä¿¡ç®± | åŒ¿åå€¾è¯‰ä¸é—®ç­”</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: 100vh;
      color: #333;
      line-height: 1.6;
    }

    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-size: 2.5rem;
      color: #5d5fef;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      font-size: 1.1rem;
    }

    .tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 2px solid #dee2e6;
    }

    .tab {
      padding: 12px 24px;
      cursor: pointer;
      font-weight: 600;
      color: #6c757d;
      background: #f8f9fa;
      border: none;
      border-radius: 8px 8px 0 0;
      margin-right: 8px;
    }

    .tab.active {
      background: #5d5fef;
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      padding: 24px;
      margin-bottom: 24px;
      transition: transform 0.2s;
    }

    .card:hover {
      transform: translateY(-4px);
    }

    .form-group {
      margin-bottom: 16px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #555;
    }

    textarea, input[type="text"] {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      resize: vertical;
    }

    button {
      background: #5d5fef;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    button:hover {
      background: #4a4bcd;
    }

    .message {
      margin-bottom: 16px;
      padding: 16px;
      background: #f1f3f5;
      border-radius: 8px;
      position: relative;
    }

    .message-content {
      color: #333;
      margin-bottom: 8px;
    }

    .reply {
      margin-top: 12px;
      padding: 12px;
      background: #e8f5e8;
      border-radius: 8px;
      font-style: italic;
    }

    .reply-input {
      display: flex;
      gap: 8px;
      margin-top: 12px;
    }

    .reply-input input {
      flex: 1;
    }

    .pending {
      opacity: 0.6;
      border-left: 4px solid #ffc107;
    }

    .actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 16px;
    }

    .btn-small {
      padding: 6px 12px;
      font-size: 0.9rem;
    }

    .btn-approve {
      background: #28a745;
    }

    .btn-reject {
      background: #dc3545;
    }

    footer {
      text-align: center;
      margin-top: 60px;
      color: #6c757d;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ“¬ æ ‘æ´ä¿¡ç®±</h1>
      <p class="subtitle">åŒ¿åå€¾è¯‰ï¼Œæ¸©æš–å›åº” | ä½ å¯ä»¥æé—®ï¼Œä¹Ÿå¯ä»¥åˆ†äº«å¿ƒäº‹</p>
    </header>

    <div class="tabs">
      <button class="tab active" data-tab="ask">å‘æˆ‘æé—®</button>
      <button class="tab" data-tab="confession">åŒ¿åå€¾è¯‰</button>
      <button class="tab" data-tab="admin">å®¡æ ¸ç®¡ç†</button>
    </div>

    <!-- æé—®è¡¨å• -->
    <div id="ask" class="tab-content active">
      <div class="card">
        <h2>å‘æˆ‘æé—®</h2>
        <p>æœ‰ä»€ä¹ˆæƒ³é—®æˆ‘çš„ï¼ŸåŒ¿åå‘é€ï¼Œæˆ‘ä¼šè®¤çœŸå›å¤ â¤ï¸</p>
        <div class="form-group">
          <label for="question">ä½ çš„é—®é¢˜</label>
          <textarea id="question" placeholder="æ¯”å¦‚ï¼šä½ æ˜¯æ€ä¹ˆåšæŒå­¦ä¹ ç¼–ç¨‹çš„ï¼Ÿ"></textarea>
        </div>
        <button id="submitQuestion">å‘é€æé—®</button>
      </div>
    </div>

    <!-- å€¾è¯‰è¡¨å• -->
    <div id="confession" class="tab-content">
      <div class="card">
        <h2>åŒ¿åå€¾è¯‰</h2>
        <p>æŠŠå¿ƒäº‹è¯´ç»™æ ‘æ´å¬ï¼Œè¿™é‡Œåªæœ‰ç†è§£å’Œæ¸©æš–</p>
        <div class="form-group">
          <label for="confessionText">æƒ³è¯´çš„è¯</label>
          <textarea id="confessionText" placeholder="æ¯”å¦‚ï¼šæœ€è¿‘å‹åŠ›å¥½å¤§ï¼Œæ„Ÿè§‰å¿«è¦æ’‘ä¸ä½äº†..."></textarea>
        </div>
        <button id="submitConfession">æŠ•é€’å¿ƒäº‹</button>
      </div>
    </div>

    <!-- å®¡æ ¸ç®¡ç† -->
    <div id="admin" class="tab-content">
      <div class="card">
        <h2>å¾…å®¡æ ¸å†…å®¹</h2>
        <div id="pendingList">
          <p>æš‚æ— å¾…å®¡æ ¸å†…å®¹</p>
        </div>
      </div>

      <div class="card">
        <h2>å·²å‘å¸ƒå†…å®¹</h2>
        <div id="approvedList">
          <p>æš‚æ— å·²å‘å¸ƒå†…å®¹</p>
        </div>
      </div>
    </div>

    <!-- å·²å‘å¸ƒæ¶ˆæ¯åˆ—è¡¨ -->
    <div id="messages" class="tab-content">
      <div class="card">
        <h2>å¤§å®¶çš„ç•™è¨€</h2>
        <div id="messageList">
          <p>è¿˜æ²¡æœ‰æ”¶åˆ°ç•™è¨€ï¼Œå¿«æ¥æé—®æˆ–å€¾è¯‰å§ï½</p>
        </div>
      </div>
    </div>

    <footer>
      <p>æ ‘æ´ä¿¡ç®± | åŒ¿åäº¤æµï¼Œå½¼æ­¤æ¸©æš– â¤ï¸</p>
      <p>æ‰€æœ‰å†…å®¹å‡ç»è¿‡å®¡æ ¸ï¼Œæ¶æ„ä¿¡æ¯å°†è¢«è¿‡æ»¤</p>
    </footer>
  </div>

  <script>
    // æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨
    let pendingItems = [];
    let approvedItems = [];
    let replies = {};

    // åˆ‡æ¢æ ‡ç­¾é¡µ
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
        
        if (tab.dataset.tab === 'messages') {
          renderMessages();
        }
      });
    });

    // æäº¤æé—®
    document.getElementById('submitQuestion').addEventListener('click', () => {
      const text = document.getElementById('question').value.trim();
      if (text) {
        pendingItems.push({
          id: Date.now(),
          type: 'question',
          content: text,
          timestamp: new Date()
        });
        document.getElementById('question').value = '';
        alert('æé—®å·²æäº¤ï¼Œç­‰å¾…å®¡æ ¸åæ˜¾ç¤º');
        updatePendingList();
      }
    });

    // æäº¤å€¾è¯‰
    document.getElementById('submitConfession').addEventListener('click', () => {
      const text = document.getElementById('confessionText').value.trim();
      if (text) {
        pendingItems.push({
          id: Date.now(),
          type: 'confession',
          content: text,
          timestamp: new Date()
        });
        document.getElementById('confessionText').value = '';
        alert('å¿ƒäº‹å·²æŠ•é€’ï¼Œç­‰å¾…å®¡æ ¸åæ˜¾ç¤º');
        updatePendingList();
      }
    });

    // æ›´æ–°å¾…å®¡æ ¸åˆ—è¡¨
    function updatePendingList() {
      const list = document.getElementById('pendingList');
      if (pendingItems.length === 0) {
        list.innerHTML = '<p>æš‚æ— å¾…å®¡æ ¸å†…å®¹</p>';
        return;
      }

      list.innerHTML = '';
      pendingItems.forEach(item => {
        const itemEl = document.createElement('div');
        itemEl.className = 'message pending';
        itemEl.innerHTML = `
          <div class="message-content">
            <strong>${item.type === 'question' ? 'æé—®' : 'å€¾è¯‰'}:</strong>
            ${item.content}
          </div>
          <div class="actions">
            <button class="btn-small btn-approve" data-id="${item.id}">é€šè¿‡</button>
            <button class="btn-small btn-reject" data-id="${item.id}">æ‹’ç»</button>
          </div>
        `;
        list.appendChild(itemEl);
      });

      // ç»‘å®šå®¡æ ¸äº‹ä»¶
      document.querySelectorAll('.btn-approve').forEach(btn => {
        btn.addEventListener('click', approveItem);
      });

      document.querySelectorAll('.btn-reject').forEach(btn => {
        btn.addEventListener('click', rejectItem);
      });
    }

    // é€šè¿‡å®¡æ ¸
    function approveItem(e) {
      const id = Number(e.target.dataset.id);
      const index = pendingItems.findIndex(item => item.id === id);
      if (index !== -1) {
        const item = pendingItems.splice(index, 1)[0];
        approvedItems.push(item);
        updatePendingList();
        updateApprovedList();
        renderMessages();
      }
    }

    // æ‹’ç»å®¡æ ¸
    function rejectItem(e) {
      const id = Number(e.target.dataset.id);
      pendingItems = pendingItems.filter(item => item.id !== id);
      updatePendingList();
    }

    // æ›´æ–°å·²é€šè¿‡åˆ—è¡¨
    function updateApprovedList() {
      const list = document.getElementById('approvedList');
      if (approvedItems.length === 0) {
        list.innerHTML = '<p>æš‚æ— å·²å‘å¸ƒå†…å®¹</p>';
        return;
      }

      list.innerHTML = '';
      approvedItems.forEach(item => {
        const itemEl = document.createElement('div');
        itemEl.className = 'message';
        const replyHtml = replies[item.id] ? 
          `<div class="reply">å›å¤ï¼š${replies[item.id]}</div>` : 
          `<div class="reply-input">
            <input type="text" placeholder="å›å¤è¿™æ¡ç•™è¨€..." data-for="${item.id}">
            <button class="btn-small" onclick="addReply(${item.id})">å›å¤</button>
          </div>`;

        itemEl.innerHTML = `
          <div class="message-content">
            <strong>${item.type === 'question' ? 'æé—®' : 'å€¾è¯‰'}:</strong>
            ${item.content}
          </div>
          ${replyHtml}
        `;
        list.appendChild(itemEl);
      });
    }

    // æ·»åŠ å›å¤
    window.addReply = function(id) {
      const input = document.querySelector(`input[data-for="${id}"]`);
      const value = input.value.trim();
      if (value) {
        replies[id] = value;
        input.value = '';
        updateApprovedList();
        renderMessages();
      }
    };

    // æ¸²æŸ“æ¶ˆæ¯åˆ—è¡¨
    function renderMessages() {
      const list = document.getElementById('messageList');
      if (approvedItems.length === 0) {
        list.innerHTML = '<p>è¿˜æ²¡æœ‰æ”¶åˆ°ç•™è¨€ï¼Œå¿«æ¥æé—®æˆ–å€¾è¯‰å§ï½</p>';
        return;
      }

      list.innerHTML = '';
      approvedItems.forEach(item => {
        const messageEl = document.createElement('div');
        messageEl.className = 'message';
        messageEl.innerHTML = `
          <div class="message-content">${item.content}</div>
          ${replies[item.id] ? `<div class="reply">å›å¤ï¼š${replies[item.id]}</div>` : ''}
        `;
        list.appendChild(messageEl);
      });
    }

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      // æ·»åŠ ç¤ºä¾‹æ•°æ®ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰
      if (pendingItems.length === 0 && approvedItems.length === 0) {
        approvedItems.push({
          id: 1,
          type: 'question',
          content: 'ä½ æ˜¯æ€ä¹ˆä¿æŒç§¯æå¿ƒæ€çš„ï¼Ÿ',
          timestamp: new Date()
        });
        replies[1] = 'æ¯å¤©è®°å½•ä¸‰ä»¶å¼€å¿ƒçš„å°äº‹ï¼Œæ…¢æ…¢å°±ä¼šå‘ç°ç”Ÿæ´»å…¶å®å¾ˆç¾å¥½~';

        approvedItems.push({
          id: 2,
          type: 'confession',
          content: 'æœ€è¿‘å·¥ä½œå‹åŠ›å¥½å¤§ï¼Œæ„Ÿè§‰å¿«è¦å´©æºƒäº†...',
          timestamp: new Date()
        });
        replies[2] = 'æŠ±æŠ±ä½ ï¼Œå‹åŠ›å¤§çš„æ—¶å€™è®°å¾—åœä¸‹æ¥ä¼‘æ¯ï¼Œä½ å·²ç»åšå¾—å¾ˆå¥½äº†';

        updateApprovedList();
        renderMessages();
      }
    });
  </script>
</body>
</html>
